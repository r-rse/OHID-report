{
  "hash": "8de6fefa8869d039b05ca884c99e3f7d",
  "result": {
    "markdown": "---\ntitle: \"SPHERE-review\"\nauthor: \"Anna Krystalli - `r-rse`\"\ntheme: materia\n---\n\n\n## Initial Comments\n\n### Reproducibility & Dependency Management\n\n#### Use `renv` for dependency management\n\nWhile `renv` is best suited for project rather than package dependency management, once functionality is packaged separately, actual modelling runs will be more stable managed by package [`renv`](https://rstudio.github.io/renv/articles/renv.html)`.`\n\nWhile the use of `checkpoint` is indeed a good start, there is a lot of code dedicated to effectively reproducing `renv` functionality. More importantly,\n\n-   lists of packages appear to be managed manually and separately for CRAN & GitHub packages. All of this can be handled automatically by `renv` through `renv.lock` files.\n\n-   Exact project libraries based on such files can be easily installed with `renv::restore()`,\n\n-   Updates can be performed normally using for example, `remotes::update_packages` and the library updated with `renv::snapshots()`.\n\n-   Lockfiles can be version controlled alongside code in `renv::history()` can be used view the history of the lockfile. If an upgrade goes astray, you can revert the lockfile to a specific commit, e.g. `renv::revert(commit = \"abc123\")`\n\n-   Finally `renv::equip()` ensures that system prerequisites for compilation of a package are available (e.g Rtools on windows).\n\n\n::: {.cell}\n<iframe src=\"https://rstudio.github.io/renv/articles/renv.html\" width=\"672\" height=\"400px\" data-external=\"1\"></iframe>\n:::\n\n\n### Updating packages as part of workflow\n\nIt is not good practice to be updating or installing packages as part of the workflow. It is better to separate that step.\n\n### Use package `config` for configuration management\n\nWhile user inputs are well documented and easily configurable through the `user-input.R` file, it's better practice to manage user configuration inputs more formally through a config file and access them through package [`config`](https://rstudio.github.io/config/)\n\n\n::: {.cell}\n<iframe src=\"https://rstudio.github.io/config/\" width=\"672\" height=\"400px\" data-external=\"1\"></iframe>\n:::\n\n\n-   Ensures config values are used explicitly avoiding having all loaded into the global environment where they can potentially be overwritten.\n\n-   Allows for different configurations to be set for different environments/situations which can be specifically activated by setting a single environment variable: `R_CONFIG_ACTIVE` .\n\n-   As such configurations under different scenarios can be stored in the same file rather than being overwritten in `use-input.R` every time a different configuration is required, increasing transparency.\n\n-   Configurations for HPC can also be explicitly set in the config file and activated by setting `R_CONFIG_ACTIVE` to e.g. `HPC` . This would be far more robust than the current detection of `unix` as the OS which is not explicit enough and could cause problems should a user be running the modelling workflow on a local unix system or even testing the workflow out in a unix docker container (an issue I encountered).\n\n## Orchestrating workflows with `targets` package\n\nGiven a large part of the software is composed of orchestrating workflows and chaining models together, using package [`targets`](https://books.ropensci.org/targets/) is strongly recommended.\n\n> The [`targets`](https://docs.ropensci.org/targets/) package is a [Make](https://www.gnu.org/software/make/)-like pipeline tool for Statistics and data science in R. With [`targets`](https://docs.ropensci.org/targets/), you can maintain a reproducible workflow without repeating yourself. [`targets`](https://docs.ropensci.org/targets/) learns how your pipeline fits together, skips costly runtime for tasks that are already up to date, runs only the necessary computation, supports implicit parallel computing, abstracts files as R objects, and shows tangible evidence that the results match the underlying code and data.\n\n\n::: {.cell}\n<iframe src=\"https://books.ropensci.org/targets/\" width=\"672\" height=\"400px\" data-external=\"1\"></iframe>\n:::\n\n\n### \n\n### Code repetition\n\nThe code appears to be very repetive in parts, for example\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}